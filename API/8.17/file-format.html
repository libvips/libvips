<!--
SPDX-FileCopyrightText: libvips team and contributors

SPDX-License-Identifier: LGPL-2.1-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Vips &ndash; 8.0: Technical background &gt; The libvips file format</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8" />

  
  <meta property="og:type" content="website"/>

  

  
  <meta property="og:title" content="Vips: Technical background &gt; The libvips file format"/>
  <meta property="og:description" content="Reference for Vips-8.0: Technical background &gt; The libvips file format"/>
  <meta name="twitter:title" content="Vips: Technical background &gt; The libvips file format"/>
  <meta name="twitter:description" content="Reference for Vips-8.0: Technical background &gt; The libvips file format"/>


  
  <meta name="twitter:card" content="summary"/>

  
  
  
  <link rel="search" type="application/opensearchdescription+xml" title="Vips" href="opensearch.xml">
  
  

  <link rel="stylesheet" href="style.css" type="text/css" />

  

  
  <script src="urlmap.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>

  
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    <nav class="sidebar devhelp-hidden">
      
      
      <div class="search section">
        <form id="search-form" autocomplete="off">
          <input id="search-input" type="text" name="do-not-autocomplete" placeholder="Click, or press 's' to search" autocomplete="off"/>
        </form>
      </div>
      
      <div class="section namespace">
        <h3><a href="index.html">Vips</a></h3>
        <p>API Version: 8.0</p>
        
        <p>Library Version: 8.17</p>
        
      </div>
      
      
      <div class="section generator">
        <p>Generated by <a href="https://gitlab.gnome.org/GNOME/gi-docgen">gi-docgen</a> 2025.3</p>
      </div>
    </nav>

    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>

    
<section id="main" class="content">
  
  <h4 id="title" style="display:flex;">
    Technical background &gt; The libvips file format
    <a href="#title" class="anchor"></a>
    
    <a class="srclink" title="go to source location" href="https://github.com/libvips/libvips/blob/master/doc/file-format.md">[src]</a>
    
  </h4>
  
  <section>
    <div class="docblock">
    <p>libvips has a simple, native file format. It&#8217;s very fast, there is no image
size limit, and it supports arbitrary metadata. Although few other programs
can read these images (though recent versions of ImageMagick do have basic
support for the <code>.v</code> format), it can be useful as an intermediate format
for command-line processing. For&nbsp;example:</p>
<div class="codehilite"><pre><span></span><code>$<span class="w"> </span>vips<span class="w"> </span>invert<span class="w"> </span>input.tif<span class="w"> </span>t.v
$<span class="w"> </span>vips<span class="w"> </span>gamma<span class="w"> </span>t.v<span class="w"> </span>output.tif
</code></pre></div>

<p>is faster than using <code>.tif</code> for the temporary intermediate image. This
section documents the libvips file&nbsp;format.</p>
<p>libvips comes with a command-line program called <code>vipsedit</code> which is useful
for destructively changing fields in a <code>.v</code> image. The <code>vipsheader</code> program
can be used to extract any&nbsp;metadata.</p>
<p>libvips files come in three parts. First, there is a 64-byte header, containing
an identifying magic number and a set of very basic fields, such as image
width in pixels. Next, the image data is stored as a set of band-interleaved
scanlines, from the top of the image to the bottom. Finally, after the
pixel data comes an optional block of <span class="caps">XML</span> containing any extra metadata,
such as an <span class="caps">ICC</span> profile or the <span class="caps">EXIF</span>&nbsp;data.</p>
<h2 id="the-header">The header<a class="md-anchor" href="#the-header" title="Permanent link"></a></h2>
<p>The fields in the libvips header are always stored least-significant byte first
(Intel ordering). Only the most basic information about the image is in
the header: most metadata is stored in the <span class="caps">XML</span> extension block after the
pixel&nbsp;data.</p>
<p>If the first four bytes of the file are in order 08 f2 a6 b6, the image
data (see the next section) is stored in Intel byte order (<span class="caps">LSB</span> first)
and will need to be swapped if read on a <span class="caps">SPARC</span>-style machine (<span class="caps">MSB</span> first).
If the magic number is b6 a6 f2 08, the image data is in <span class="caps">SPARC</span> order and
will need to swapped if read on an Intel-style machine. libvips does this
swapping&nbsp;automatically.</p>
<table>
<thead>
<tr>
<th>Bytes</th>
<th>Type</th>
<th>libvips name</th>
<th>Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td>0 - 3</td>
<td></td>
<td></td>
<td>Magic number: 08 f2 a6 b6, or b6 a6 f2 08</td>
</tr>
<tr>
<td>4 - 7</td>
<td>int32</td>
<td><code>width</code></td>
<td>Width of image, in pixels</td>
</tr>
<tr>
<td>8 - 11</td>
<td>int32</td>
<td><code>height</code></td>
<td>Height of image, in pixels</td>
</tr>
<tr>
<td>12 - 15</td>
<td>int32</td>
<td><code>bands</code></td>
<td>Number of image bands (channels)</td>
</tr>
<tr>
<td>16 - 19</td>
<td></td>
<td></td>
<td>Unused</td>
</tr>
<tr>
<td>20 - 23</td>
<td><a href="enum.BandFormat.html"><code>VipsBandFormat</code></a></td>
<td><code>format</code></td>
<td>Band format</td>
</tr>
<tr>
<td>24 - 27</td>
<td><a href="enum.Coding.html"><code>VipsCoding</code></a></td>
<td><code>coding</code></td>
<td>Image coding</td>
</tr>
<tr>
<td>28 - 31</td>
<td><a href="enum.Interpretation.html"><code>VipsInterpretation</code></a></td>
<td><code>interpretation</code></td>
<td>Pixel interpretation</td>
</tr>
<tr>
<td>32 - 35</td>
<td>float32</td>
<td><code>xres</code></td>
<td>Horizontal resolution, in pixels per mm</td>
</tr>
<tr>
<td>36 - 39</td>
<td>float32</td>
<td><code>yres</code></td>
<td>Vertical resolution, in pixels per mm</td>
</tr>
<tr>
<td>40 - 47</td>
<td></td>
<td></td>
<td>Unused</td>
</tr>
<tr>
<td>48 - 51</td>
<td>int32</td>
<td><code>xoffset</code></td>
<td>Horizontal offset of origin, in pixels</td>
</tr>
<tr>
<td>52 - 55</td>
<td>int32</td>
<td><code>yoffset</code></td>
<td>Vertical offset of origin, in pixels</td>
</tr>
<tr>
<td>56 - 63</td>
<td></td>
<td></td>
<td>Unused</td>
</tr>
</tbody>
</table>
<h2 id="the-image-data">The image data<a class="md-anchor" href="#the-image-data" title="Permanent link"></a></h2>
<p>If <code>coding</code> is set to <a href="enum.Coding.html#none"><code>VIPS_CODING_NONE</code></a>, pixels are stored in native C
format, that is, the native format of the machine that wrote the data. If you
open a big-endian image on a little-endian machine, libvips will automatically
byte-swap for you.  libvips has 10 band formats, see <a href="enum.BandFormat.html"><code>VipsBandFormat</code></a>.
Image data is stored as a simple list of scanlines, from the top of the
image to the bottom. Pixels are band-interleaved, so <span class="caps">RGBRGBRGBRGB</span>, for
example. There is no padding at the end of&nbsp;scanlines.</p>
<p>If <code>coding</code> is set to <a href="enum.Coding.html#labq"><code>VIPS_CODING_LABQ</code></a>, each pixel is four bytes, with
10 bits for L* and 11 bits for each of a* and b*. These 32 bits are packed
into 4 bytes, with the most significant 8 bits of each value in the first
3 bytes, and the left-over bits packed into the final byte as&nbsp;2:3:3.</p>
<p>If <code>coding</code> is set to <a href="enum.Coding.html#rad"><code>VIPS_CODING_RAD</code></a>, each pixel is <span class="caps">RGB</span> or <span class="caps">XYZ</span> float,
with 8 bits of mantissa and then 8 bits of exponent, shared between the
three channels. This coding style is used by the Radiance family of programs
(and the <span class="caps">HDR</span> format) commonly used for <span class="caps">HDR</span>&nbsp;imaging.</p>
<p>Other values of <code>coding</code> can set other coding styles. Use
<a href="func.IMAGE_SIZEOF_IMAGE.html"><code>VIPS_IMAGE_SIZEOF_IMAGE()</code></a> to calculate the size of the image data&nbsp;section.</p>
<h2 id="the-metadata">The metadata<a class="md-anchor" href="#the-metadata" title="Permanent link"></a></h2>
<p>Following the image data is a chunk of <span class="caps">XML</span> holding a simple list of name-value
pairs. Binary data is encoded with base64. Use <a href="method.Image.set.html"><code>vips_image_set()</code></a> and friends
to set and get image&nbsp;metadata.</p>
<p>You can use <code>vipsheader -f getext some_file.v</code> to get the <span class="caps">XML</span> from a libvips
image, and <code>vipsedit --setext some_file.v &lt; file.xml</code> to replace the <span class="caps">XML</span>.</p>
    </div>
  </section>
</section>


    
<div id="toc" class="toc">
  <nav aria-labelledby="toc-title">
    <p id="toc-title">Content</p>
    <ul class="toc-list">
      
        
        <li class="toc-list-item"><a href="#the-header"><span class="link-text">The header</span></a></li>
          
        
        <li class="toc-list-item"><a href="#the-image-data"><span class="link-text">The image data</span></a></li>
          
        
        <li class="toc-list-item"><a href="#the-metadata"><span class="link-text">The metadata</span></a></li>
          
        
      
    </ul>
  </nav>
</div>


    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>
</body>
</html>