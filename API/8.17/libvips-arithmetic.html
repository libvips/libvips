<!--
SPDX-FileCopyrightText: libvips team and contributors

SPDX-License-Identifier: LGPL-2.1-or-later
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <title>Vips &ndash; 8.0: Operator index &gt; By section &gt; Arithmetic</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <meta charset="utf-8" />

  
  <meta property="og:type" content="website"/>

  

  
  <meta property="og:title" content="Vips: Operator index &gt; By section &gt; Arithmetic"/>
  <meta property="og:description" content="Reference for Vips-8.0: Operator index &gt; By section &gt; Arithmetic"/>
  <meta name="twitter:title" content="Vips: Operator index &gt; By section &gt; Arithmetic"/>
  <meta name="twitter:description" content="Reference for Vips-8.0: Operator index &gt; By section &gt; Arithmetic"/>


  
  <meta name="twitter:card" content="summary"/>

  
  
  
  <link rel="search" type="application/opensearchdescription+xml" title="Vips" href="opensearch.xml">
  
  

  <link rel="stylesheet" href="style.css" type="text/css" />

  

  
  <script src="urlmap.js"></script>
  
  
  <script src="fzy.js"></script>
  <script src="search.js"></script>
  
  <script src="main.js"></script>

  
</head>

<body>
  <div id="body-wrapper" tabindex="-1">

    <nav class="sidebar devhelp-hidden">
      
      
      <div class="search section">
        <form id="search-form" autocomplete="off">
          <input id="search-input" type="text" name="do-not-autocomplete" placeholder="Click, or press 's' to search" autocomplete="off"/>
        </form>
      </div>
      
      <div class="section namespace">
        <h3><a href="index.html">Vips</a></h3>
        <p>API Version: 8.0</p>
        
        <p>Library Version: 8.17</p>
        
      </div>
      
      
      <div class="section generator">
        <p>Generated by <a href="https://gitlab.gnome.org/GNOME/gi-docgen">gi-docgen</a> 2025.3</p>
      </div>
    </nav>

    <button id="btn-to-top" class="hidden"><span class="up-arrow"></span></button>

    
<section id="main" class="content">
  
  <h4 id="title" style="display:flex;">
    Operator index &gt; By section &gt; Arithmetic
    <a href="#title" class="anchor"></a>
    
    <a class="srclink" title="go to source location" href="https://github.com/libvips/libvips/blob/master/doc/libvips-arithmetic.md">[src]</a>
    
  </h4>
  
  <section>
    <div class="docblock">
    <!-- libvips/arithmetic -->

<p>These operations perform pixel arithmetic, that is, they perform an
arithmetic operation, such as addition, on every pixel in an image or a
pair of images. All (except in a few cases noted below) will work with
images of any type or any mixture of types, of any size and of any number
of&nbsp;bands.</p>
<p>For binary operations, if the number of bands differs, one of the images
must have one band. In this case, an n-band image is formed from the
one-band image by joining n copies of the one-band image together, and then
the two n-band images are operated&nbsp;upon.</p>
<p>In the same way, for operations that take an array constant, such as
<a href="method.Image.remainder_const.html"><code>vips_remainder_const()</code></a>, you can mix single-element arrays or
single-band images&nbsp;freely.</p>
<p>Arithmetic operations try to preserve precision by increasing the number of
bits in the output image when necessary. Generally, this follows the <span class="caps">ANSI</span> C
conventions for type promotion, so multiplying two
<a href="enum.BandFormat.html#uchar"><code>VIPS_FORMAT_UCHAR</code></a> images together, for example, produces a
<a href="enum.BandFormat.html#ushort"><code>VIPS_FORMAT_USHORT</code></a> image, and taking the <a href="method.Image.cos.html"><code>vips_cos()</code></a> of a
<a href="enum.BandFormat.html#ushort"><code>VIPS_FORMAT_USHORT</code></a> image produces <a href="enum.BandFormat.html#float"><code>VIPS_FORMAT_FLOAT</code></a>&nbsp;image.</p>
<p>After processing, use <a href="method.Image.cast.html"><code>vips_cast()</code></a> and friends to take then format
back down again.<a href="method.Image.cast_uchar.html"><code>vips_cast_uchar()</code></a>, for example, will cast any image
down to 8-bit&nbsp;unsigned.</p>
<p>Images have an interpretation: a meaning for the pixel values. With
<a href="enum.Interpretation.html#srgb"><code>VIPS_INTERPRETATION_sRGB</code></a>, for example, the first three bands will be
interpreted (for example, by a saver like <a href="method.Image.jpegsave.html"><code>vips_jpegsave()</code></a>) as R, G
and B, with values in 0 - 255, and any fourth band will be interpreted as an
alpha&nbsp;channel.</p>
<p>After arithmetic, you may wish to change the interpretation (for example to
save as 16-bit <span class="caps">PNG</span>). Use <a href="method.Image.copy.html"><code>vips_copy()</code></a> to change the interpretation
without changing&nbsp;pixels.</p>
<p>For binary arithmetic operations, type promotion occurs in two stages.
First, the two input images are cast up to the smallest common format,
that is, the type with the smallest range that can represent the full
range of both inputs. This conversion can be represented as a&nbsp;table:</p>
<h2 id="smallest-common-format">Smallest common format<a class="md-anchor" href="#smallest-common-format" title="Permanent link"></a></h2>
<table>
<thead>
<tr>
<th><strong><code>in2</code>/<code>in1</code></strong></th>
<th><strong>uchar</strong></th>
<th><strong>char</strong></th>
<th><strong>ushort</strong></th>
<th><strong>short</strong></th>
<th><strong>uint</strong></th>
<th><strong>int</strong></th>
<th><strong>float</strong></th>
<th><strong>double</strong></th>
<th><strong>complex</strong></th>
<th><strong>double complex</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>uchar</td>
<td>ushort</td>
<td>short</td>
<td>ushort</td>
<td>short</td>
<td>uint</td>
<td>int</td>
<td>float</td>
<td>double</td>
<td>complex</td>
<td>double complex</td>
</tr>
<tr>
<td>char</td>
<td>short</td>
<td>short</td>
<td>short</td>
<td>short</td>
<td>int</td>
<td>int</td>
<td>float</td>
<td>double</td>
<td>complex</td>
<td>double complex</td>
</tr>
<tr>
<td>ushort</td>
<td>ushort</td>
<td>short</td>
<td>ushort</td>
<td>short</td>
<td>uint</td>
<td>int</td>
<td>float</td>
<td>double</td>
<td>complex</td>
<td>double complex</td>
</tr>
<tr>
<td>short</td>
<td>short</td>
<td>short</td>
<td>short</td>
<td>short</td>
<td>int</td>
<td>int</td>
<td>float</td>
<td>double</td>
<td>complex</td>
<td>double complex</td>
</tr>
<tr>
<td>uint</td>
<td>uint</td>
<td>int</td>
<td>uint</td>
<td>int</td>
<td>uint</td>
<td>int</td>
<td>float</td>
<td>double</td>
<td>complex</td>
<td>double complex</td>
</tr>
<tr>
<td>int</td>
<td>int</td>
<td>int</td>
<td>int</td>
<td>int</td>
<td>int</td>
<td>int</td>
<td>float</td>
<td>double</td>
<td>complex</td>
<td>double complex</td>
</tr>
<tr>
<td>float</td>
<td>float</td>
<td>float</td>
<td>float</td>
<td>float</td>
<td>float</td>
<td>float</td>
<td>float</td>
<td>double</td>
<td>complex</td>
<td>double complex</td>
</tr>
<tr>
<td>double</td>
<td>double</td>
<td>double</td>
<td>double</td>
<td>double</td>
<td>double</td>
<td>double</td>
<td>double</td>
<td>double</td>
<td>double complex</td>
<td>double complex</td>
</tr>
<tr>
<td>complex</td>
<td>complex</td>
<td>complex</td>
<td>complex</td>
<td>complex</td>
<td>complex</td>
<td>complex</td>
<td>complex</td>
<td>double complex</td>
<td>complex</td>
<td>double complex</td>
</tr>
<tr>
<td>double complex</td>
<td>double complex</td>
<td>double complex</td>
<td>double complex</td>
<td>double complex</td>
<td>double complex</td>
<td>double complex</td>
<td>double complex</td>
<td>double complex</td>
<td>double complex</td>
<td>double complex</td>
</tr>
</tbody>
</table>
<p>In the second stage, the operation is performed between the two identical
types to form the output. The details vary between operations, but
generally the principle is that the output type should be large enough to
represent the whole range of possible values, except that int never becomes&nbsp;float.</p>
<h2 id="functions">Functions<a class="md-anchor" href="#functions" title="Permanent link"></a></h2>
<ul>
<li><a href="method.Image.add.html"><code>vips_add()</code></a></li>
<li><a href="type_func.Image.sum.html"><code>vips_sum()</code></a></li>
<li><a href="method.Image.subtract.html"><code>vips_subtract()</code></a></li>
<li><a href="method.Image.multiply.html"><code>vips_multiply()</code></a></li>
<li><a href="method.Image.divide.html"><code>vips_divide()</code></a></li>
<li><a href="method.Image.linear.html"><code>vips_linear()</code></a></li>
<li><a href="method.Image.linear1.html"><code>vips_linear1()</code></a></li>
<li><a href="method.Image.remainder.html"><code>vips_remainder()</code></a></li>
<li><a href="method.Image.remainder_const.html"><code>vips_remainder_const()</code></a></li>
<li><a href="method.Image.remainder_const1.html"><code>vips_remainder_const1()</code></a></li>
<li><a href="method.Image.invert.html"><code>vips_invert()</code></a></li>
<li><a href="method.Image.abs.html"><code>vips_abs()</code></a></li>
<li><a href="method.Image.sign.html"><code>vips_sign()</code></a></li>
<li><a href="method.Image.clamp.html"><code>vips_clamp()</code></a></li>
<li><a href="method.Image.maxpair.html"><code>vips_maxpair()</code></a></li>
<li><a href="method.Image.minpair.html"><code>vips_minpair()</code></a></li>
<li><a href="method.Image.round.html"><code>vips_round()</code></a></li>
<li><a href="method.Image.floor.html"><code>vips_floor()</code></a></li>
<li><a href="method.Image.ceil.html"><code>vips_ceil()</code></a></li>
<li><a href="method.Image.rint.html"><code>vips_rint()</code></a></li>
<li><a href="method.Image.math.html"><code>vips_math()</code></a></li>
<li><a href="method.Image.sin.html"><code>vips_sin()</code></a></li>
<li><a href="method.Image.cos.html"><code>vips_cos()</code></a></li>
<li><a href="method.Image.tan.html"><code>vips_tan()</code></a></li>
<li><a href="method.Image.asin.html"><code>vips_asin()</code></a></li>
<li><a href="method.Image.acos.html"><code>vips_acos()</code></a></li>
<li><a href="method.Image.atan.html"><code>vips_atan()</code></a></li>
<li><a href="method.Image.exp.html"><code>vips_exp()</code></a></li>
<li><a href="method.Image.exp10.html"><code>vips_exp10()</code></a></li>
<li><a href="method.Image.log.html"><code>vips_log()</code></a></li>
<li><a href="method.Image.log10.html"><code>vips_log10()</code></a></li>
<li><a href="method.Image.sinh.html"><code>vips_sinh()</code></a></li>
<li><a href="method.Image.cosh.html"><code>vips_cosh()</code></a></li>
<li><a href="method.Image.tanh.html"><code>vips_tanh()</code></a></li>
<li><a href="method.Image.asinh.html"><code>vips_asinh()</code></a></li>
<li><a href="method.Image.acosh.html"><code>vips_acosh()</code></a></li>
<li><a href="method.Image.atanh.html"><code>vips_atanh()</code></a></li>
<li><a href="method.Image.complex.html"><code>vips_complex()</code></a></li>
<li><a href="method.Image.polar.html"><code>vips_polar()</code></a></li>
<li><a href="method.Image.rect.html"><code>vips_rect()</code></a></li>
<li><a href="method.Image.conj.html"><code>vips_conj()</code></a></li>
<li><a href="method.Image.complex2.html"><code>vips_complex2()</code></a></li>
<li><a href="method.Image.cross_phase.html"><code>vips_cross_phase()</code></a></li>
<li><a href="method.Image.complexget.html"><code>vips_complexget()</code></a></li>
<li><a href="method.Image.real.html"><code>vips_real()</code></a></li>
<li><a href="method.Image.imag.html"><code>vips_imag()</code></a></li>
<li><a href="method.Image.complexform.html"><code>vips_complexform()</code></a></li>
<li><a href="method.Image.relational.html"><code>vips_relational()</code></a></li>
<li><a href="method.Image.equal.html"><code>vips_equal()</code></a></li>
<li><a href="method.Image.notequal.html"><code>vips_notequal()</code></a></li>
<li><a href="method.Image.less.html"><code>vips_less()</code></a></li>
<li><a href="method.Image.lesseq.html"><code>vips_lesseq()</code></a></li>
<li><a href="method.Image.more.html"><code>vips_more()</code></a></li>
<li><a href="method.Image.moreeq.html"><code>vips_moreeq()</code></a></li>
<li><a href="method.Image.relational_const.html"><code>vips_relational_const()</code></a></li>
<li><a href="method.Image.equal_const.html"><code>vips_equal_const()</code></a></li>
<li><a href="method.Image.notequal_const.html"><code>vips_notequal_const()</code></a></li>
<li><a href="method.Image.less_const.html"><code>vips_less_const()</code></a></li>
<li><a href="method.Image.lesseq_const.html"><code>vips_lesseq_const()</code></a></li>
<li><a href="method.Image.more_const.html"><code>vips_more_const()</code></a></li>
<li><a href="method.Image.moreeq_const.html"><code>vips_moreeq_const()</code></a></li>
<li><a href="method.Image.relational_const1.html"><code>vips_relational_const1()</code></a></li>
<li><a href="method.Image.equal_const1.html"><code>vips_equal_const1()</code></a></li>
<li><a href="method.Image.notequal_const1.html"><code>vips_notequal_const1()</code></a></li>
<li><a href="method.Image.less_const1.html"><code>vips_less_const1()</code></a></li>
<li><a href="method.Image.lesseq_const1.html"><code>vips_lesseq_const1()</code></a></li>
<li><a href="method.Image.more_const1.html"><code>vips_more_const1()</code></a></li>
<li><a href="method.Image.moreeq_const1.html"><code>vips_moreeq_const1()</code></a></li>
<li><a href="method.Image.boolean.html"><code>vips_boolean()</code></a></li>
<li><a href="method.Image.andimage.html"><code>vips_andimage()</code></a></li>
<li><a href="method.Image.orimage.html"><code>vips_orimage()</code></a></li>
<li><a href="method.Image.eorimage.html"><code>vips_eorimage()</code></a></li>
<li><a href="method.Image.lshift.html"><code>vips_lshift()</code></a></li>
<li><a href="method.Image.rshift.html"><code>vips_rshift()</code></a></li>
<li><a href="method.Image.boolean_const.html"><code>vips_boolean_const()</code></a></li>
<li><a href="method.Image.andimage_const.html"><code>vips_andimage_const()</code></a></li>
<li><a href="method.Image.orimage_const.html"><code>vips_orimage_const()</code></a></li>
<li><a href="method.Image.eorimage_const.html"><code>vips_eorimage_const()</code></a></li>
<li><a href="method.Image.lshift_const.html"><code>vips_lshift_const()</code></a></li>
<li><a href="method.Image.rshift_const.html"><code>vips_rshift_const()</code></a></li>
<li><a href="method.Image.boolean_const1.html"><code>vips_boolean_const1()</code></a></li>
<li><a href="method.Image.andimage_const1.html"><code>vips_andimage_const1()</code></a></li>
<li><a href="method.Image.orimage_const1.html"><code>vips_orimage_const1()</code></a></li>
<li><a href="method.Image.eorimage_const1.html"><code>vips_eorimage_const1()</code></a></li>
<li><a href="method.Image.lshift_const1.html"><code>vips_lshift_const1()</code></a></li>
<li><a href="method.Image.rshift_const1.html"><code>vips_rshift_const1()</code></a></li>
<li><a href="method.Image.math2.html"><code>vips_math2()</code></a></li>
<li><a href="method.Image.pow.html"><code>vips_pow()</code></a></li>
<li><a href="method.Image.wop.html"><code>vips_wop()</code></a></li>
<li><a href="method.Image.atan2.html"><code>vips_atan2()</code></a></li>
<li><a href="method.Image.math2_const.html"><code>vips_math2_const()</code></a></li>
<li><a href="method.Image.pow_const.html"><code>vips_pow_const()</code></a></li>
<li><a href="method.Image.wop_const.html"><code>vips_wop_const()</code></a></li>
<li><a href="method.Image.atan2_const.html"><code>vips_atan2_const()</code></a></li>
<li><a href="method.Image.math2_const1.html"><code>vips_math2_const1()</code></a></li>
<li><a href="method.Image.pow_const1.html"><code>vips_pow_const1()</code></a></li>
<li><a href="method.Image.wop_const1.html"><code>vips_wop_const1()</code></a></li>
<li><a href="method.Image.atan2_const1.html"><code>vips_atan2_const1()</code></a></li>
<li><a href="method.Image.avg.html"><code>vips_avg()</code></a></li>
<li><a href="method.Image.deviate.html"><code>vips_deviate()</code></a></li>
<li><a href="method.Image.min.html"><code>vips_min()</code></a></li>
<li><a href="method.Image.max.html"><code>vips_max()</code></a></li>
<li><a href="method.Image.stats.html"><code>vips_stats()</code></a></li>
<li><a href="method.Image.measure.html"><code>vips_measure()</code></a></li>
<li><a href="method.Image.find_trim.html"><code>vips_find_trim()</code></a></li>
<li><a href="method.Image.getpoint.html"><code>vips_getpoint()</code></a></li>
<li><a href="method.Image.hist_find.html"><code>vips_hist_find()</code></a></li>
<li><a href="method.Image.hist_find_ndim.html"><code>vips_hist_find_ndim()</code></a></li>
<li><a href="method.Image.hist_find_indexed.html"><code>vips_hist_find_indexed()</code></a></li>
<li><a href="method.Image.hough_line.html"><code>vips_hough_line()</code></a></li>
<li><a href="method.Image.hough_circle.html"><code>vips_hough_circle()</code></a></li>
<li><a href="method.Image.project.html"><code>vips_project()</code></a></li>
<li><a href="method.Image.profile.html"><code>vips_profile()</code></a></li>
</ul>
<h2 id="enumerations">Enumerations<a class="md-anchor" href="#enumerations" title="Permanent link"></a></h2>
<ul>
<li><a href="enum.OperationMath.html"><code>VipsOperationMath</code></a></li>
<li><a href="enum.OperationMath2.html"><code>VipsOperationMath2</code></a></li>
<li><a href="enum.OperationRound.html"><code>VipsOperationRound</code></a></li>
<li><a href="enum.OperationRelational.html"><code>VipsOperationRelational</code></a></li>
<li><a href="enum.OperationBoolean.html"><code>VipsOperationBoolean</code></a></li>
<li><a href="enum.OperationComplex.html"><code>VipsOperationComplex</code></a></li>
<li><a href="enum.OperationComplex2.html"><code>VipsOperationComplex2</code></a></li>
<li><a href="enum.OperationComplexget.html"><code>VipsOperationComplexget</code></a></li>
</ul>
    </div>
  </section>
</section>


    
<div id="toc" class="toc">
  <nav aria-labelledby="toc-title">
    <p id="toc-title">Content</p>
    <ul class="toc-list">
      
        
        <li class="toc-list-item"><a href="#smallest-common-format"><span class="link-text">Smallest common format</span></a></li>
          
        
        <li class="toc-list-item"><a href="#functions"><span class="link-text">Functions</span></a></li>
          
        
        <li class="toc-list-item"><a href="#enumerations"><span class="link-text">Enumerations</span></a></li>
          
        
      
    </ul>
  </nav>
</div>


    <section id="search" class="content hidden"></section>

    <footer>
    
    </footer>
  </div>
</body>
</html>